webpackJsonp([3],{oyLh:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("Xxa5"),o=a.n(s),n=a("exGp"),i=a.n(n),l={name:"place",mixins:[tableManage,{data:function(){return{map:null,isShowMap:!1,clickMapInfo:{point:{}},localSearch:null,searchStr:""}},mounted:function(){var e=this;this.$nextTick(function(){e.map=new BMap.Map("map");var t=new BMap.Point(116.404,39.915);e.map.centerAndZoom(t,15),e.map.enableScrollWheelZoom(!0),e.map.addEventListener("click",function(t){e.clickMapInfo=t,e.chooseMapOk()})})},methods:{searchMap:function(){var e=this.searchStr.trim();""!=e&&(this.localSearch||(this.localSearch=new BMap.LocalSearch(this.map,{renderOptions:{map:this.map}})),this.localSearch.search(e))},chooseMapOk:function(){var e=this.showEditCtn?"editInfo":"searchInfo";this[e].mapInfo=this.clickMapInfo;var t=this.clickMapInfo.point;this[e].lon=t.lng,this[e].lat=t.lat,this.isShowMap=!1}}},{data:function(){return{isShowDist:!1,distInfo:null}},mounted:function(){},methods:{chooseDistOk:function(){var e=this.showEditCtn?"editInfo":"searchInfo";this[e].distInfo=this.distInfo,this[e].address=this.distInfo.districtValue;info[["provinceCode","cityCode","townCode","streetCode"][this.distInfo.levelNum-2]]=this.distInfo.districtCode,this.isShowDist=!1},cancelChooseDist:function(){this.distInfo=null,this.isShowDist=!1},treeNodeClick:function(e){this.distInfo=e}}}],data:function(){return{keys:[{str:"地址",key:"address"},{str:"小区名称",key:"placeName"},{str:"详细地址",key:"address"},{str:"百度坐标",key:"remark"}],searchKeys:["address"],editKeys:["placeName","contactPhone","contacter","address","lon","lat","createyear","remark","character"],api:{list:{url:"/place/queryPlacePage"},add:{url:"/place/addPlace"},edit:{url:"/place/updatePlace"},del:{url:"/place/delPlace"}},operates:[{str:"新增",fun:"add"},{str:"修改",fun:"edit"},{str:"删除",fun:"del"}],distData:[],defaultProps:{children:"children",label:"districtValue"}}},mounted:function(){var e=this;return i()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getAllDist();case 2:e.distData=t.sent;case 3:case"end":return t.stop()}},t,e)}))()},methods:{changeSearchValue:function(e){return e.operatorUserId=localStorage.zlOpUid||43,e},testInput:function(){return!0},changeEditValue:function(e){return e.operatorUserId=localStorage.zlOpUid||43,delete e.mapInfo,console.log(e.distInfo),e},handleDelRow:function(e){return{id:e.id}}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"table-ctn"},[a("div",{staticClass:"page-title"},[e._v("小区管理")]),a("div",{staticClass:"search-ctn"},[a("el-form",{attrs:{model:e.searchInfo,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"地区"}},[a("el-input",{attrs:{placeholder:"请选择地区"},on:{focus:function(t){e.isShowDist=!0}},model:{value:e.searchInfo.address,callback:function(t){e.$set(e.searchInfo,"address",t)},expression:"searchInfo.address"}})],1)],1),a("el-button",{attrs:{type:"success"},on:{click:e.search}},[e._v("查询")]),a("el-button",{attrs:{type:"success"},on:{click:e.reset}},[e._v("重置")])],1),a("self-table",{attrs:{keys:e.keys,tableData:e.tableData,total:e.total,operates:e.operates},on:{changePage:e.changePage,chooseRow:e.chooseRow,add:e.add,edit:e.edit,del:e.del}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showEditCtn,expression:"showEditCtn"}],staticClass:"edit-ctn fix-cover"},[a("div",{staticClass:"box"},[a("el-form",{attrs:{model:e.editInfo,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{model:{value:e.editInfo.placeName,callback:function(t){e.$set(e.editInfo,"placeName",t)},expression:"editInfo.placeName"}})],1),a("el-form-item",{attrs:{label:"行政区域"}},[a("el-input",{attrs:{placeholder:"请选择地区"},on:{focus:function(t){e.isShowDist=!0}},model:{value:e.editInfo.address,callback:function(t){e.$set(e.editInfo,"address",t)},expression:"editInfo.address"}})],1),a("el-form-item",{attrs:{label:"性质"}},[a("el-input",{model:{value:e.editInfo.appUrl,callback:function(t){e.$set(e.editInfo,"appUrl",t)},expression:"editInfo.appUrl"}})],1),a("el-form-item",{attrs:{label:"年份"}},[a("el-date-picker",{attrs:{align:"right",type:"year",placeholder:"选择年"},model:{value:e.editInfo.createyear,callback:function(t){e.$set(e.editInfo,"createyear",t)},expression:"editInfo.createyear"}})],1),a("el-form-item",{attrs:{label:"详细地址"}},[a("el-input",{model:{value:e.editInfo.address,callback:function(t){e.$set(e.editInfo,"address",t)},expression:"editInfo.address"}})],1),a("el-form-item",{attrs:{label:"联系人"}},[a("el-input",{model:{value:e.editInfo.contacter,callback:function(t){e.$set(e.editInfo,"contacter",t)},expression:"editInfo.contacter"}})],1),a("el-form-item",{attrs:{label:"联系电话"}},[a("el-input",{model:{value:e.editInfo.contactPhone,callback:function(t){e.$set(e.editInfo,"contactPhone",t)},expression:"editInfo.contactPhone"}})],1),a("el-form-item",{attrs:{label:"经纬度"}},[a("el-input",{on:{focus:function(t){e.isShowMap=!0}},model:{value:e.editInfo.lon,callback:function(t){e.$set(e.editInfo,"lon",t)},expression:"editInfo.lon"}}),a("el-input",{on:{focus:function(t){e.isShowMap=!0}},model:{value:e.editInfo.lat,callback:function(t){e.$set(e.editInfo,"lat",t)},expression:"editInfo.lat"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.addOrUpdate}},[e._v("保存")]),a("el-button",{attrs:{type:"primary"},on:{click:e.editCancel}},[e._v("取消")])],1)],1)],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowDist,expression:"isShowDist"}],staticClass:"tree-ctn fix-cover"},[a("div",{staticClass:"box"},[a("el-tree",{attrs:{data:e.distData,props:e.defaultProps},on:{"node-click":e.treeNodeClick}}),a("el-button",{attrs:{type:"success"},on:{click:e.chooseDistOk}},[e._v("确定")]),a("el-button",{attrs:{type:"success"},on:{click:e.cancelChooseDist}},[e._v("取消")])],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowMap,expression:"isShowMap"}],staticClass:"fix-cover map"},[a("div",{staticClass:"box map-ctn center"},[a("div",{staticClass:"map-search"},[a("el-input",{staticClass:"search-input",attrs:{placeholder:"输入关键字"},on:{keyup:e.searchMap},model:{value:e.searchStr,callback:function(t){e.searchStr=t},expression:"searchStr"}}),a("el-button",{on:{click:e.searchMap}},[e._v("搜索")])],1),a("div",{attrs:{id:"map"}})])])])},staticRenderFns:[]};var r=a("VU/8")(l,c,!1,function(e){a("oysO")},"data-v-32198758",null);t.default=r.exports},oysO:function(e,t){}});
//# sourceMappingURL=3.883bc446523ac1114fa3.js.map