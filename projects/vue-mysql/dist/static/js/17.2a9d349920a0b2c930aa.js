webpackJsonp([17],{457:function(e,t,a){a(592);var s=a(165)(a(510),a(633),"data-v-7fdd43db",null);e.exports=s.exports},468:function(e,t,a){"use strict";var s=a(76),r=a.n(s),i=a(75),n=a.n(i);t.a={methods:{scrollMore:function(e,t,a,s,i,l){var o=this;$(e).parents(".el-select-dropdown__wrap").scroll(n()(r.a.mark(function e(){var n,c,d,u,m,p,f;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=$(this),c=n.height(),d=n.get(0).scrollHeight,u=n.scrollTop(),!(d-c-u<=10)){e.next=12;break}if(o[a]++,!(o[s]<o[a])){e.next=5;break}return e.abrupt("return");case 5:return m={page:o[a]},l&&$.extend(!0,m,l),e.next=9,tryAwait("get",i,m);case 9:p=e.sent,p&&(f=p.model||[]),f.length>1&&(o[t]=o[t].concat(f));case 12:case"end":return e.stop()}},e,this)})))}}}},469:function(e,t,a){"use strict";var s=a(166),r={data:function(){return{fileList:[],upImgSize:.5,upImgUrl:s.a.upImgUrl,upImgData:{biz:"vendor"},imageUrl:"",isWithCookie:!0,isMultiple:!1}},methods:{beforeUpload:function(){var e="image/jpeg"===file.type,t=file.size/1024/1024<this.upImgSize;return e||this.$message.error("上传头像图片只能是 JPG 格式!"),t||this.$message.error("上传头像图片大小不能超过"+this.this.upImgSize+"MB!"),e&&t},handleChange:function(){},upImgSuccess:function(){}}};t.a=r},510:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(76),r=a.n(s),i=a(75),n=a.n(i),l=a(469),o=a(468);t.default={name:"role",mixins:[mixTable,l.a,o.a],data:function(){return{isLot:!1,curChooseAreaId:"",keys:[{key:"realname",str:"姓名"},{key:"mobile",str:"手机号"},{key:"clerkNum",str:"员工编号"},{key:"vendorName",str:"供应商"},{key:"areaName",str:"所属片区"},{key:"storeName",str:"所属门店"},{key:"createdTime",str:"添加时间"}],operates:[{f:"edit",str:"编辑"},{f:"unbund",str:"解绑"}],selfApi:{list:{type:"get",url:"/clerk/index"},add:{type:"post",url:"/clerk/addDo"},edit:{type:"post",url:"/clerk/editDo"}},searchKeys:["clerkName","clerkMobile","clerkNumber"],editKeys:["vendorAreaId","storeId","realname","mobile","clerkNum","idCard"],areaList:[],shopList:[],zonePage:1,zoneTotal:0,shopPage:1,shopTotal:0}},mounted:function(){var e=this;return n()(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,tryAwait("get","/vendor/allList");case 2:a=t.sent,a&&(e.areaList=a.model||[],e.zoneTotal=a.totalPage),e.$nextTick(function(){e.scrollMore(".s2","areaList","zonePage","zoneTotal","/clerk/add")}),e.$nextTick(function(){e.scrollMore(".s3","shopList","shopPage","shopTotal","/store/index",{childAreaId:e.editItem.vendorAreaId})});case 6:case"end":return t.stop()}},t,e)}))()},methods:{edit:function(e){var t=this;return n()(r.a.mark(function a(){var s;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,tryAwait("get","/store/edit",{storeId:e.row.storeId});case 2:s=a.sent,s.childAreas.success&&(t.curEditing.id=e.row.userId,t.curOperate="编辑",t.areaList=s.childAreas.model||[],t.editItem=$.extend(!0,{},e.row),t.$set(t.editItem,"vendorAreaId",e.row.areaId),t.isInput=!0);case 4:case"end":return a.stop()}},a,t)}))()},addLot:function(){this.isInput=this.isLot=!1},upImgSuccess:function(e){var t=this;return n()(r.a.mark(function a(){var s,i;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return s=e.model[0].filename,a.next=3,tryAwait("post","/clerk/fileupDo",{filename:s});case 3:i=a.sent,i.success?t.$message({type:"success",message:"店员上传成功~"}):t.$message({type:"error",message:i.msgInfo});case 5:case"end":return a.stop()}},a,t)}))()},unbund:function(e){var t=this;this.$confirm("确定解绑?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(n()(r.a.mark(function a(){var s,i;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return s=e.row.userId,a.next=3,tryAwait("post","/clerk/delete",{clerkId:s});case 3:i=a.sent,i.success&&t.tableList(t.currentPage);case 5:case"end":return a.stop()}},a,t)})))},getShop:function(){var e=this;return n()(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.editItem.vendorAreaId){t.next=2;break}return t.abrupt("return");case 2:return e.shopPage=1,e.shopList=[],e.editItem.storeId="",t.next=7,tryAwait("get","/clerk/store",{childAreaId:e.editItem.vendorAreaId});case 7:a=t.sent,a&&(e.shopList=a.model||[],e.shopTotal=a.totalPage);case 9:case"end":return t.stop()}},t,e)}))()},testRule:function(){return this.editItem.realname&&""!=this.editItem.realname.trim()?this.editItem.idCard&&/^\d{6}(18|19|20)?\d{2}(0[1-9]|1[12])(0[1-9]|[12]\d|3[01])\d{3}(\d|X)$/i.test(this.editItem.idCard)?!(!this.editItem.mobile||!/^1(3|4|5|7|8)\d{9}$/.test(this.editItem.mobile.trim()))||(this.$message({type:"error",message:"手机号不正确"}),!1):(this.$message({type:"error",message:"身份证号不正确"}),!1):(this.$message({type:"error",message:"姓名没填"}),!1)},selfEditCancel:function(){Array.prototype.forEach.call($(".el-icon-close"),function(e){e.click()})}}}},553:function(e,t,a){t=e.exports=a(424)(!1),t.push([e.i,"",""])},592:function(e,t,a){var s=a(553);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a(425)("820787dc",s,!0)},633:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{height:"100%"}},[a("div",{staticClass:"table-main no-nav"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isInput,expression:"!isInput"}],staticClass:"table-ctn"},[a("div",{staticClass:"page-title"},[e._v("店员配置")]),a("div",{staticClass:"search-ctn"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.searchMsg}},[a("el-form-item",{attrs:{label:"店员姓名"}},[a("el-input",{attrs:{placeholder:"输入姓名关键字，请勿带符号"},model:{value:e.searchMsg.clerkName,callback:function(t){e.searchMsg.clerkName=t},expression:"searchMsg.clerkName"}})],1),a("el-form-item",{attrs:{label:"店员手机"}},[a("el-input",{attrs:{placeholder:"输入店员手机号"},model:{value:e.searchMsg.clerkMobile,callback:function(t){e.searchMsg.clerkMobile=t},expression:"searchMsg.clerkMobile"}})],1),a("el-form-item",{attrs:{label:"员工编号"}},[a("el-input",{attrs:{placeholder:"输入员工编号"},model:{value:e.searchMsg.clerkNumber,callback:function(t){e.searchMsg.clerkNumber=t},expression:"searchMsg.clerkNumber"}})],1)],1),a("el-button",{ref:"search",attrs:{type:"primary",icon:"search"},on:{click:e.searchList}},[e._v("按条件查询")]),a("a",{staticClass:"reset-form",on:{click:e.clearSearch}},[e._v(" 清空筛选条件")]),a("el-button",{ref:"add",attrs:{type:"success"},on:{click:e.add}},[e._v("添加店员")]),a("el-button",{ref:"import",attrs:{type:"success"},on:{click:function(t){e.isInput=!0,e.isLot=!0}}},[e._v("批量添加店员")])],1),a("mtable",{attrs:{keys:e.keys,tableData:e.tableData,ops:e.operates,selfApi:e.selfApi,totalPage:e.totalPage,currentPage:e.currentPage,tabOp:e.tabOp},on:{edit:e.edit,pageChange:e.pageChange,unbund:e.unbund}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isInput&&!e.isLot,expression:"isInput && !isLot"}],staticClass:"edit-ctn"},[a("div",{staticClass:"page-title"},[e._v(e._s(e.curOperate)+"店员")]),a("div",{staticClass:"form-ctn"},[a("el-form",{attrs:{"label-width":"80px"},model:{value:e.editItem,callback:function(t){e.editItem=t},expression:"editItem"}},[a("el-form-item",{attrs:{label:"店员姓名"}},[a("el-input",{attrs:{type:"text",placeholder:"最多8个汉字"},model:{value:e.editItem.realname,callback:function(t){e.editItem.realname=t},expression:"editItem.realname"}})],1),a("el-form-item",{attrs:{label:"身份证号"}},[a("el-input",{attrs:{type:"text",placeholder:"18位居民身份证号码"},model:{value:e.editItem.idCard,callback:function(t){e.editItem.idCard=t},expression:"editItem.idCard"}})],1),a("el-form-item",{attrs:{label:"手机号码"}},[a("el-input",{attrs:{type:"text",placeholder:"11位中国大陆手机号码"},model:{value:e.editItem.mobile,callback:function(t){e.editItem.mobile=t},expression:"editItem.mobile"}})],1),a("div",{staticClass:"border-line"}),a("el-form-item",{attrs:{label:"员工编号"}},[a("el-input",{attrs:{type:"text"},model:{value:e.editItem.clerkNum,callback:function(t){e.editItem.clerkNum=t},expression:"editItem.clerkNum"}})],1),a("el-form-item",{attrs:{label:"所属片区"}},[a("el-select",{attrs:{placeholder:"请选择所属片区"},on:{change:e.getShop},model:{value:e.editItem.vendorAreaId,callback:function(t){e.editItem.vendorAreaId=t},expression:"editItem.vendorAreaId"}},e._l(e.areaList,function(e){return a("el-option",{key:e.id,staticClass:"s2",attrs:{label:e.areaName,value:e.id}})}))],1),a("el-form-item",{attrs:{label:"所属门店"}},[a("el-select",{attrs:{placeholder:"请选择所属门店"},model:{value:e.editItem.storeId,callback:function(t){e.editItem.storeId=t},expression:"editItem.storeId"}},e._l(e.shopList,function(e){return a("el-option",{key:e.id,staticClass:"s3",attrs:{label:e.storeName,value:e.id}})}))],1),a("div",{staticClass:"border-line"}),a("el-button",{staticClass:"left",attrs:{type:"primary"},on:{click:e.editOk}},[e._v("完成")]),a("div",{staticClass:"goBack",on:{click:e.goBack}},[e._v("返回")])],1)],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isLot,expression:"isLot"}],staticClass:"edit-ctn"},[a("div",{staticClass:"page-title"},[e._v("批量增加店员")]),a("div",{staticClass:"form-ctn"},[a("el-upload",{staticClass:"avatar-uploader",attrs:{"file-list":e.fileList,accept:"application/vnd.ms-excel",drag:"drag",action:e.upImgUrl,name:"upfile","list-type":"picture","with-credentials":e.isWithCookie,multiple:e.isMultiple,data:e.upImgData,"on-success":e.upImgSuccess}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),a("em",[e._v("点击上传")])])]),a("el-button",{staticClass:"left",attrs:{type:"primary"},on:{click:e.addLot}},[e._v("完成")]),a("div",{staticClass:"goBack",on:{click:e.goBack}},[e._v("返回")])],1)])])])},staticRenderFns:[]}}});