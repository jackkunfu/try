webpackJsonp([14],{431:function(e,t,a){a(579);var r=a(165)(a(485),a(620),"data-v-44a4a096",null);e.exports=r.exports},472:function(e,t,a){e.exports={default:a(475),__esModule:!0}},473:function(e,t,a){"use strict";t.__esModule=!0;var r=a(472),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e,t,a){return t in e?(0,i.default)(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},475:function(e,t,a){a(476);var r=a(33).Object;e.exports=function(e,t,a){return r.defineProperty(e,t,a)}},476:function(e,t,a){var r=a(77);r(r.S+r.F*!a(51),"Object",{defineProperty:a(56).f})},485:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(473),i=a.n(r),s=a(76),l=a.n(s),o=a(75),n=a.n(o);t.default={mixins:[mixTable],data:function(){return{roleList:[],areaList:[],keys:[{key:"realName",str:"姓名"},{key:"mobile",str:"手机号"},{key:"areaName",str:"所属区域"},{key:"roleName",str:"角色"},{key:"createdTime",str:"添加时间"}],operates:[{f:"edit",str:"编辑"},{f:"freeze",str:"冻结",idKey:"userId"}],selfApi:{list:{type:"get",url:"/account/index"},add:{type:"post",url:"/account/save"},edit:{type:"post",url:"/account/update"},freeze:{type:"post",url:"/account/freeze"}},searchKeys:["realName","mobile","roleId","areaId"],editKeys:["realName","mobile","groupId","groupIdIdx","password"]}},mounted:function(){var e=this;return n()(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,tryAwait("get","/role/roleList");case 2:if(t.t0=t.sent.model,t.t0){t.next=5;break}t.t0=[];case 5:return e.roleList=t.t0,t.next=8,tryAwait("get","/area/index");case 8:if(t.t1=t.sent.model,t.t1){t.next=11;break}t.t1=[];case 11:e.areaList=t.t1;case 12:case"end":return t.stop()}},t,e)}))()},methods:i()({selfEdit:function(){var e=this;this.areaList.map(function(t){e.editItem.areaName.split(",").indexOf(t.areaName)>-1&&(t.checked=!0)})},selfEditCancel:function(){var e=this;this.areaList.forEach(function(t){e.$set(t,"checked",!1)}),this.roleList.forEach(function(t){e.$set(t,"checked",!1)})},getChooseArea:function(){return this.areaList.filter(function(e){return 1==e.checked})},testRule:function(){if(!this.editItem.realName||""==this.editItem.realName.trim())return alert("输入姓名~"),!1;var e=/^1[3|4|5|7|8]\d{9}$/;if(!this.editItem.mobile||!e.test(this.editItem.mobile.trim()))return alert("手机号有误~"),!1;if(this.editItem.password&&""!=this.editItem.password.trim()){if(this.editItem.password.trim().length<6)return void alert("密码至少6位")}else{var t=this.editItem.mobile;this.editItem.password=t.substr(t.length-6,6)}if(!this.editItem.groupIdIdx||""==(this.editItem.groupIdIdx+"").trim())return void alert("请选择角色");if(0==this.getChooseArea().length)return alert("未选择区域"),!1;this.curEditing.id&&(this.editItem.id=this.curEditing.id),this.editItem.realname=this.editItem.realName.trim();this.editItem.groupIdIdx;return this.editItem.groupId=this.editItem.groupIdIdx,this.editItem.vendorAreaIds=this.getChooseArea().map(function(e){return e.id}).join(","),!0}},"selfEdit",function(e){var t=this;this.$set(this.editItem,"groupIdIdx",this.roleList[this.roleList.map(function(e){return e.name}).indexOf(this.editItem.roleName)].id),this.curEditing={index:e.$index,id:e.row.userId};var a=(e.row.areaName+"").trim().split(" ");console.log("chooseArr"),console.log(a),this.areaList.forEach(function(e){a.indexOf(e.areaName)>-1?t.$set(e,"checked",!0):t.$set(e,"checked",!1)})})}},540:function(e,t,a){t=e.exports=a(424)(!1),t.push([e.i,".goBack[data-v-44a4a096]{top:-6px}",""])},579:function(e,t,a){var r=a(540);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(425)("f0166596",r,!0)},620:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{height:"100%"}},[a("div",{staticClass:"table-main no-nav"},[e.isInput?e._e():a("div",{staticClass:"table-ctn"},[a("div",{staticClass:"page-title"},[e._v("账号配置")]),a("div",{staticClass:"search-ctn"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.searchMsg}},[a("el-form-item",{attrs:{label:"姓名查询"}},[a("el-input",{attrs:{placeholder:"输入姓名关键字，请勿带符号"},model:{value:e.searchMsg.realName,callback:function(t){e.searchMsg.realName=t},expression:"searchMsg.realName"}})],1),a("el-form-item",{attrs:{label:"角色查询"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchMsg.roleId,callback:function(t){e.searchMsg.roleId=t},expression:"searchMsg.roleId"}},e._l(e.roleList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}))],1),a("el-form-item",{attrs:{label:"手机查询"}},[a("el-input",{attrs:{placeholder:"输入手机号码"},model:{value:e.searchMsg.mobile,callback:function(t){e.searchMsg.mobile=t},expression:"searchMsg.mobile"}})],1),a("el-form-item",{attrs:{label:"所属区域"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchMsg.areaId,callback:function(t){e.searchMsg.areaId=t},expression:"searchMsg.areaId"}},e._l(e.areaList,function(e,t){return a("el-option",{key:t,attrs:{label:e.areaName,value:e.id}})}))],1)],1),a("el-button",{ref:"search",attrs:{type:"primary",icon:"search"},on:{click:e.searchList}},[e._v("按条件查询")]),a("a",{staticClass:"reset-form",on:{click:e.clearSearch}},[e._v(" 清空筛选条件")]),a("el-button",{ref:"add",attrs:{type:"success"},on:{click:e.add}},[e._v("添加用户")])],1),a("mtable",{attrs:{keys:e.keys,tableData:e.tableData,ops:e.operates,selfApi:e.selfApi,totalPage:e.totalPage,currentPage:e.currentPage,tabOp:e.tabOp},on:{edit:e.edit,pageChange:e.pageChange,freeze:e.freeze}})],1),e.isInput?a("div",{staticClass:"edit-ctn"},[a("div",{staticClass:"page-title"},[e._v(e._s(e.curOperate)+"账号")]),a("div",{staticClass:"form-ctn long"},[a("el-form",{attrs:{model:e.editItem,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{attrs:{placeholder:"8个汉字以内"},model:{value:e.editItem.realName,callback:function(t){e.editItem.realName=t},expression:"editItem.realName"}})],1),a("el-form-item",{attrs:{label:"手机号码"}},[a("el-input",{attrs:{placeholder:"11位手机号"},model:{value:e.editItem.mobile,callback:function(t){e.editItem.mobile=t},expression:"editItem.mobile"}})],1),a("el-form-item",{attrs:{label:"登录密码"}},[a("el-input",{attrs:{placeholder:"默认为手机后6位"},model:{value:e.editItem.password,callback:function(t){e.editItem.password=t},expression:"editItem.password"}})],1),a("div",{staticClass:"border-line"}),a("el-form-item",{attrs:{label:"角色选择"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.editItem.groupIdIdx,callback:function(t){e.editItem.groupIdIdx=t},expression:"editItem.groupIdIdx"}},e._l(e.roleList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}))],1),a("div",{staticClass:"border-line"}),a("el-form-item",{attrs:{label:"所属区域"}},e._l(e.areaList,function(t,r){return a("el-checkbox",{key:r,model:{value:t.checked,callback:function(e){t.checked=e},expression:"item.checked"}},[e._v(e._s(t.areaName))])})),a("el-button",{staticClass:"left",attrs:{type:"primary"},on:{click:e.editOk}},[e._v("完成")]),a("div",{staticClass:"goBack",on:{click:e.goBack}},[e._v("返回")])],1)],1)]):e._e()])])},staticRenderFns:[]}}});